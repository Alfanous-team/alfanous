<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title> 
			{% block title %} 
				{% if params.query %}
					{% if current.unit == "aya" %}
						{{ _("Ayah Results to Query:") }} 
					{% elif current.unit == "word" %}
						{{ _("Word Results to Query:") }}
					{% elif current.unit == "translation" %}
						{{ _("Translation Results to Query:") }} 
					{% else %}
						{{ _("Results to Query:") }} 
					{% endif %}	
					{{ params.query }}
					
				{% else %}
					{% if current.unit == "aya" %}
						{{ _("Quranic Verse Search") }}
					{% elif current.unit == "word" %}
						{{ _("Quranic Word Search") }}
					{% elif current.unit == "translation" %}
						{{ _("Quranic Translation Search") }}
					{% else %}
						{{ _("Advanced Quranic Search Engine") }} 
					{% endif %}
					 - {{ _("Alfanous") }} 
				{% endif %}
			{% endblock %}  
	</title>
	
	<meta name="description" content="{{ _('Alfanous is a functional, dynamic, comprehensive Qur’an search engine that has been effectively designed to carry out simple or advanced Quranic searches.') }}"/>
	<meta name="keywords" content="{{ _("quran") }}, {{ _("forqan") }}, {{ _("koran") }}, {{ _("search") }}, {{ _("search engine") }}, {{ _("ayates") }}, {{ _("surates") }}, {{ _("advanced") }}, {{ _("statistics") }}, {{  _("linguistic") }}, {{ _("information retrieval") }}, {{ _("natural language processing") }}, {{ _("words") }}, {{ _("Lantern") }}, {{ _("alfanous") }},  "/>
	<!-- meta name="copyright" content="&copy; Alfanous Team, AGPL" -->
	<meta name="author" content="Assem Chelli, Ahmed Ramadan, Abdellah Chelli, Mouad Debbar" />
	<meta name="robots" content="index,follow"/>

	<link rel="icon" href="/static/img/icon_32.png" sizes="32x32"> 
	<link rel="shortcut icon" href="/static/img/favicon.ico" type="image/x-icon">

	<link rel="search" type="application/opensearchdescription+xml" title="Alfanous" href="/static/alfanous-opensearch.xml"/>
	<script type="text/javascript">
	// <![CDATA[

		function build_search_link(param,query,filter)
				{
					var new_param = param; 
                           new_param.action="search";
					new_param.page = 1;
					new_param.sortedby = "mushaf";
					if (filter) new_param.query = "(" + $("#search_box").val() + ") + " + query;
					else new_param.query = query;
					return "<a class='no_decoration' href=\""+ get_url_without_params()+ "?"+ build_params( new_param )+ "\">" 
				}
		
		function get_results (param) { // this function will be used to require suggestions
			if ($.trim(param.query) != "" && param.action == "search") {
				$.ajax({
					url: "/jos2/", // http://www.alfanous.org/jos2
					async: false,
					type: "GET",
					dataType: "json",
					timeout: 10000,
					crossDomain: true,
					data: param,
					success: function(json){
						show_results (json, param);
					},
					error: function(jq_xhr, text_status, error_thrown){
						$("#search_result").html("<div id='error'><p>"+ error_thrown+"</p></div>");
						return false;
					}
					});
				};
		};


		function show_results (json, param) {		}

		function addto_searchbar(){
			window.external.AddSearchProvider("/static/alfanous-opensearch.xml");
		
		}

	// ]]>
	</script>

	<!-- Google analytics #Assem -->
	<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-9859501-4']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
	</script>
	<!-- end -->

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Bootstrap -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- Custom Alfanous CSS -->
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
{% if False %} 
{# block reserved to force localization of automatic values #}

{{ _("Ayahs") }}
{{ _("Translations") }}
{{ _("Words") }}


{% endif %}

    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="brand" href="#"></a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                    	<li><a href="#"><i class="icon-home icon-white"></i> Home</a></li>
                    	{% for available_unit in available.units.items %}
                    		{% ifequal available_unit.0 current.unit %}
                    			<li class="active"><a href="#">{{ available_unit.1 }}</a></li>
							{% else %}
							<li><a href="{% url alfanous-django.wui.views.results current.language available_unit.0 %}">{{ available_unit.1 }}</a></li>
							{% endifequal %} 
						{% endfor %}
                    </ul>
                    <ul class="nav pull-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Languages<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                {% for available_language in available.languages %}
                                <li>
									<a href="{% url alfanous-django.wui.views.results available_language.0 current.unit %}?{{ current.request }}">{{ available_language.1 }}</a> 			
								</li>
                                {% ifequal available_language.0 language.code %}
                                	<li class="divider"></li>
                                	<li class="nav-header">Current:</li>
                                	<li><a href="#">{{ available_language.1 }}</a></li>
								{% endifequal %} 
								{% endfor %}
                            </ul>
                        </li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>
    <!-- End fixed navbar -->

    <div class="container content">
        <!-- social media icons -->
		<div class="row">
		    <div id="social-icons" class="social-networks">
				<ul class="inline pull-right">
					<li><a class="facebook" href="https://www.facebook.com/Alfanous">Facebook</a></li>
					<li><a class="twitter" href="https://twitter.com/alfanous">Twitter</a></li>
					<li><a class="github" href="https://github.com/Alfanous-team/alfanous">Github</a></li>
                    <li><a class="googleplus" href="https://plus.google.com/u/0/111305625425237630318">Google+</a></li>
				</ul>
			</div>
		</div>
        <!-- end social media icons-->

		<div class="row">
            <!-- left navbar -->
            <div class="span2">
                <div class="well sidebar-nav hidden-phone affix">
                    <ul class="nav nav-list ">
                        <li class="nav-header">Information</li>
                            <li><a href="#"><i class="icon-question-sign"></i> F.A.Q</a></li>
                            <li><a href="#"><i class="icon-exclamation-sign"></i> Help</a></li>
                            <li><a href="#"><i class="icon-envelope"></i> Contact</a></li>
                            <li><a href="#"><i class="icon-download-alt"></i> Download</a></li>
                        <li class="nav-header">Contribute</li>
                            <li><a href="#"><i class="icon-globe"></i> Translate</a></li>
                            <li><a href="#"><i class="icon-comment"></i> Feedback</a></li>
                            <li><a href="#"><i class="icon-shopping-cart"></i> Donate</a></li>
                            <li><a href="#"><i class="icon-plus"></i> Other means</a></li>
                    </ul>
                </div><!--/.well -->
            </div><!--/span-->
            <!-- end left navbar -->

            <div class="span10 text-center">
                <div class="row span4 offset2">
                    <a href="#" class="logo"><img src="/static/img/alfanous.png"></a>
                        <form class="form-search text-center" id="form" name="form" method="get" action=".">
                            <div class="input-append">
                                <input id="search_box" name="query" class="search-query enter keyboardInput" placeholder="Search" type="text" value="{{ params.query }}" data-provide="typeahead" autocomplete="off"
                                data-source="[&quot;الله&quot;,&quot;محمد&quot;,&quot;الصلاة&quot;,&quot;الزكاة&quot;,&quot;الصوم&quot;,&quot;رمضان&quot;,&quot;الحج&quot;,&quot;الشهادة&quot;,&quot;العلم&quot;,&quot;المؤمنون&quot;,&quot;الرسول&quot;,&quot;الرسل&quot;,&quot;عيسى&quot;,&quot;موسى&quot;,&quot;ابراهيم&quot;,&quot;الاسلام&quot;,&quot;مسلم&quot;,&quot;الجنة&quot;,&quot;النار&quot;,&quot;العذاب&quot;,&quot;أليم&quot;,&quot;النعيم&quot;,&quot;الحياة&quot;,&quot;الدنيا&quot;,&quot;الخوع&quot;,&quot;الحكم&quot;,&quot;الكفر&quot;,&quot;الشيطان&quot;,&quot;ابليس&quot;,&quot;آدم&quot;,&quot;اليهود&quot;,&quot;اسرائيل&quot;,&quot;السنة&quot;,&quot;الاستغفار&quot;,&quot;المشركين&quot;,&quot;المشركات&quot;,&quot;النساء&quot;,&quot;التوبة&quot;,&quot;المغفرة&quot;,&quot;الصدق&quot;,&quot;التوحيد&quot;,&quot;الجهل&quot;,&quot;فأسقيناكموه&quot;,&quot;نبي&quot;,&quot;نعم؟&quot;,&quot;رسول الله&quot;,&quot;الصلاة + الزكاة&quot;,&quot;موضوع:&quot;,&quot;الملك&quot;,&quot;الصلاة | الزكاة&quot;,&quot;الصلاة - الزكاة&quot;]"
                                />
                                
                                <button type="submit" href="" class="btn" onclick="$('#form').submit(); return false;">
                                    <i class="icon-search"></i>
                                    <span class="hidden-phone">Quick {{ _("search") }}</span>
                                </button>
                                <ul class="dropdown-menu">
                                    <!-- dropdown menu links -->
                                </ul>
                            </div>

                            <div class="advanced-search text-center">
                                <a class="text-center show_hide" data-toggle="tooltip" title="first tooltip">
                                    <i class="icon-wrench"></i>
                                    Advanced search [+]
                                </a>
                            </div>
                        </form>

                   
                        <form class="form-horizontal well slidingForm">
                            <h4 class="text-center">Search options:</h2>
                                {% block options %}
								{% endblock %}
                            <div class="row">
                                {% block views_panel %}{% endblock %}
								{% block sortedby_panel %}{% endblock %}
								{% block translations_panel %}{% endblock %}
								{% block recitations_panel %} {% endblock %}
                                <button type="submit" class="btn" onclick="$('#form').submit(); return false;">
                                    <i class="icon-search"></i>
                                    Bismi'Allah Go!
                                </button>
                            </div>
                        </form>
                </div><!--/span4-->
            </div><!--/row-->
        </div>
                
        <div class="row">
        	{% block results %} {% endblock results %}
        </div>

    </div>

    <div class="hidden popoverInner">
        <p class="popoverInnerText">This is the <a href='http://json.org/'>JSON</a> output system 2 of <a href="http://www.alfanous.org">Alfanous</a> project, we call it <b>Alfanous JOS2</b>. This feature is in Alpha test and the Json schema may be it's not stable . We are waiting for real feedback and suggestions to improve its efficacy,quality and stability. To contact the author ,please send a direct email to <b> assem.ch[at]gmail.com</b> or to the mailing list <b>alfanous [at] googlegroups.com</b>
        <br/><br/> For more details  visit the page of this service <a href="https://github.com/Alfanous-team/alfanous/blob/master/src/alfanous-cgi/README.rst">here</a>
        </p>
    </div>

	<footer>
        <div class="push"><!--//--></div>
        <div class"row">
            <div id="footer">
                <div class="container">
                    <div class="row hidden-phone text-center help">
                        <div class="alert alert-info span8 offset2 text-center">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>Help!</strong> Please help us improving Alfanous Project, by taking this survey about search features in Holy Quran.
                        </div>
                    </div>
                    <hr />
                    <p class="muted credit">Copyright &copy; <a href="https://github.com/Alfanous-team/alfanous/blob/master/AUTHORS.rst">Alfanous Team</a> 2010 - 2013 &#124; released under <a href="http://www.gnu.org/licenses/agpl.html">AGPL</a> license.</p>

                    <p class="muted credit pull-right">Powered by <span class="label label-inverse">
                        <a class="footer-link-jos2" data-placement="top" data-toggle="popover">
                            <i class=" icon-chevron-up icon-white"></i>
                            Alfanous JOS2
                        </a>
                        </span> 
                        - <span class="label label-inverse hidden-phone">
                        <a class="footer-link-searchbar" onclick="addto_searchbar();return false;" href="#">
                            <i class="icon-plus-sign icon-white"></i>
                            Add to your search bar!
                        </a>
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- The javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="http://api.html5media.info/1.1.5/html5media.min.js"></script>
    <script src="/static/js/bootstrap-transition.js"></script>
    <script src="/static/js/bootstrap-alert.js"></script>
    <script src="/static/js/bootstrap-modal.js"></script>
    <script src="/static/js/bootstrap-dropdown.js"></script>
    <script src="/static/js/bootstrap-scrollspy.js"></script>
    <script src="/static/js/bootstrap-tab.js"></script>
    <script src="/static/js/bootstrap-tooltip.js"></script>
    <script src="/static/js/bootstrap-popover.js"></script>
    <script src="/static/js/bootstrap-button.js"></script>
    <script src="/static/js/bootstrap-collapse.js"></script>
    <script src="/static/js/bootstrap-typeahead.js"></script>

    <!-- audio.js -->
    <script>
        audiojs.events.ready(function() {
            var as = audiojs.createAll();
        });
    </script>

    <!-- Alfanous specific javascrit -->
    <script type="text/javascript">
    $(document).ready(function(){
        $(".slidingForm").hide();
        $('.show_hide').click(function(){
            $(".slidingForm").slideToggle(function() {
                var text = $('.show_hide').html();
                if($('.slidingForm').is(":visible")){
                    $('.show_hide').html(text.replace('+', ' - '));
                }
                else {
                    $('.show_hide').html(text.replace(' - ', '+'));
                }
            });
        });

        $(".aya_details").hide();

        $("a").click(function(event) {
            var id = $(this).attr('id');
            var ayaNum = id.split("_").pop();

            $("#" + id + "_content").slideToggle(function() {
                var text = $("#" + id).html();
                if($("#" + id + "_content").is(":visible")){
                    $("#" + id).html(text.replace('more', 'less'));
                    document.getElementById("details_icon_" + ayaNum).className = "icon-chevron-up";
                }
                else {
                    $("#" + id).html(text.replace('less', 'more'));
                    document.getElementById("details_icon_" + ayaNum).className = "icon-chevron-down";
                }
            });
            
        });

        $(".audio").hide();
        $("button").click(function(event) {
            if ($(this).attr('id').indexOf("audio_button") !== -1) {
                var id = $(this).attr('id');
                var ayaNum = id.split("_").pop();
                $("#aya_audio_" + ayaNum).slideToggle(function() {});
            };

            if ($(this).attr('id').indexOf("opy_aya") !== -1) {
                var id = $(this).attr('id');
                var ayaNum = id.split("_").pop();

                var text = $("#aya_text_" + ayaNum).html().replace(/<(?:.|\n)*?>/gm, '').replace(/\s+/g, ' ');
                window.prompt ("Copy to clipboard: Ctrl+C, Enter", $.trim(text));
            };
            
        });

        $('.footer-link-jos2').popover(
            {
                html:true,
                title:'<span class="popoverInnerText">About JOS2<span>',
                animation: true,
                content: function() {
                    return $('.popoverInner').html();
                },
            });
    });

    function addto_searchbar(){
        window.external.AddSearchProvider("/static/alfanous-opensearch.xml");
    }
    </script>
</body>
</html>
